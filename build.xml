<project name="confluence_smartsheet_plugin" default="all" basedir=".">

<target name="all" depends="smartsheet_sdk" >
</target>

<target name="smartsheet_sdk">
  <exec failonerror="true" executable="mvn" dir="${basedir}/smartsheet-java-sdk">
    <arg value="package" />
  </exec>
</target>

<target name="package_tools">
  <mkdir dir="build/jar" />
  <jar destfile="build/jar/tools.jar" basedir="build/classes">
     <manifest>
        <attribute name="Main-Class" value="GetSheet" />
     </manifest>
  </jar>
</target>

<target name="build_tools">
  <delete dir="${basedir}/build/classes" /> 
  <mkdir  dir="${basedir}/build/classes" />
  <javac srcdir="tools" destdir="build/classes">
    <classpath>
        <pathelement path="${basedir}/smartsheet-java-sdk/target/smartsheet-sdk-java-2.0.4-with-dependencies.jar" />
    </classpath>     
  </javac>
</target>

<target name="run_tools" depends="build_tools, package_tools" >
  <java jar="build/jar/tools.jar" fork="true" />
</target>

</project>
